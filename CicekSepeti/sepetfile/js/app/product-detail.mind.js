Vue.filter("date",function(e){return e?moment(e).format("D"):""}),Vue.filter("day",function(e){return e?moment(e).format("dddd"):""}),Vue.filter("month",function(e){return e?moment(e).format("MMMM"):""}),Vue.filter("year",function(e){return e?moment(e).format("YYYY"):""});var productdetail=new Vue({el:"[data-productdetail]",mixins:[locationMixins,searchMixins],data:{isSearchLocationShow:!1,selectedDate:0,firstHourSelected:!1,otherDate:"",language:{language:"Turkish",months:["Ocak","Subat","Mart","Nisan","Mayis","Haziran","Temmuz","Agustos","Eylul","Ekim","Kasim","Aralik"],monthsAbbr:["Oca","Sub","Mar","Nis","May","Haz","Tem","Agu","Eyl","Eki","Kas","Ara"],days:["Paz","Pzt","Sal","Car","Per","Cum","Cmt"],rtl:!1,ymd:"yyyy-MMMM-dd",yearSuffix:""},disableddates:{to:new Date(Date.now()-864e4),from:new Date(Date.now()+1296e6)},highlighted:{dates:[{date:new Date("2019/08/13"),className:"sevgililerGunu"},{date:new Date("2019/08/21"),className:"annelerGunu"},{date:new Date("2019/08/22"),className:"babalarGunu"},{date:new Date("2019/08/12"),className:"ogretmenlerGunu"}],includeDisabled:!0},setCookieClickedProductsList:[],comments:[],api:{commentList:"/api/comments/",similarProducts:"/api/similar/",lastviewedProducts:"/api/lastviewed/",checkSendLocation:"/api/checkdelivery/",checkdeliveryTimes:"/api/checktime/"},similar:{productDetails:""},lastViewed:{productDetails:""},sendForm:{locationId:"",bId:"",dFee:"",location:!1,date:"",time:"",isSendProduct:!1,todayDisabled:!1,productDetailMessages:"",isDeliveryExist:!1,deliveryMessages:""},messageDetail:{location:!1,date:!1,time:!1,hour:!1,minute:!1,isSendProduct:!1,todayDisabled:!1,isDeliveryExist:!1},sendTime:{interval:"",hour:"",minute:""},deliveryTimes:[]},components:{vuejsDatepicker:vuejsDatepicker},watch:{otherDate:function(e){this.sendForm.date=moment(this.otherDate).format("DD/MM/YYYY"),moment(e).format("DD/MM/YYYY")===moment().format("DD/MM/YYYY")?(this.selectedDate=1,this.selectedDeliveryDate(1,moment().format("DD/MM/YYYY"))):moment(e).format("DD/MM/YYYY")===moment().add(1,"days").format("DD/MM/YYYY")?(this.selectedDate=2,this.selectedDeliveryDate(2,moment(new Date).add(1,"days").format("DD/MM/YYYY"))):moment(e).format("DD/MM/YYYY")===moment().add(2,"days").format("DD/MM/YYYY")?(this.selectedDate=3,this.selectedDeliveryDate(3,moment(new Date).add(2,"days").format("DD/MM/YYYY"))):(this.selectedDate=4,this.selectedDeliveryDate(4,moment(this.otherDate).format("DD/MM/YYYY")))}},methods:{moment:function(){return moment()},setSelectedTime:function(e){1===e&&(this.sendForm.time=this.sendTime.hour+":"+this.sendTime.minute),""!==this.sendForm.time&&(this.messageDetail.time=!1),""!==this.sendForm.hour&&(this.messageDetail.hour=!1),""!==this.sendForm.minute&&(this.messageDetail.minute=!1)},onChangeHourSd:function(e){var i=this;if(e===1){i.firstHourSelected=1;i.sendTime.minute="";i.messageDetail.minute=!1}else{i.firstHourSelected=!1}},selectedDeliveryDate:function(e,t){var i=this;i.selectedDate=e,i.selectedDate>0&&(i.sendForm.date=t,i.messageDetail.date=!1),i.sendForm.time="",i.messageDetail.time=!1,i.sendTime.hour="",i.messageDetail.hour=!1,i.sendTime.minute="",i.messageDetail.minute=!1,i.checkdeliveryTimes()},checkSendLocation:function(e){var t=this,i=document.getElementById("productId").value,a=null!==t.getCookie("locationId")?t.getCookie("locationId"):"";axios.get(t.api.checkSendLocation,{params:{productId:i,locationId:a}}).then(function(e){t.selectedDate=0,t.sendForm.date="",t.sendForm.deliveryMessages="",t.sendForm.isDeliveryExist=!1;var i=e.data;t.sendForm.locationId=i.locationId,t.sendForm.bId=i.bId,t.sendForm.dFee=i.dFee,t.sendForm.isSendProduct=i.IsSendProduct,t.sendForm.todayDisabled=i.TodayDisabled,t.sendForm.productDetailMessages=i.ProductDetailMessages}).catch(function(e){})},checkdeliveryTimes:function(e){var t=this,i=document.getElementById("productId").value,a=null!==t.getCookie("locationId")?t.getCookie("locationId"):"",s=document.getElementById("sendFormbId").value;axios.get(t.api.checkdeliveryTimes,{params:{productId:i,pTip:pTip,locationId:a,bId:s,selectedDate:t.sendForm.date}}).then(function(e){t.deliveryTimes=e.data,t.sendForm.isDeliveryExist=t.deliveryTimes.IsDeliveryExist,t.sendForm.deliveryMessages=t.deliveryTimes.DeliveryMessages}).catch(function(e){})},openPicker:function(){this.$refs.programaticOpen.showCalendar()},locationSearchActive:function(){var e=this;e.isSearchLocationShow=!0,e.isShowLocationList=!e.isShowLocationList,setTimeout(function(){e.$refs.searchLocation.focus()},50)},closeOutsideLocationSearch:function(e){var t=this.$refs.closeOutsideLocationSearch,i=e.target;void 0!==t&&(t===i||t.contains(i)||this.isSearchLocationShow&&(this.isSearchLocationShow=!1))},programaticOpen:function(e){var t=this.$refs.programaticOpen2,i=e.target;void 0!==t&&(t===i||t.contains(i)||this.$refs.programaticOpen.close())},lazyLoad:function(){new Blazy({breakpoints:[{width:420,src:"data-src-small"}]})},similarProducts:function(e){var t=this,i=null!==sProducts?sProducts:"";axios.get(t.api.similarProducts,{params:{sproductIdList:i}}).then(function(e){t.similar.productDetails=e.data,t.lazyLoad()}).catch(function(e){})},lastviewedProducts:function(e){var t=this,i=null!==t.getCookie("productIdList")?t.getCookie("productIdList"):"";axios.get(t.api.lastviewedProducts,{params:{productIdList:i}}).then(function(e){t.lastViewed.productDetails=e.data,t.lazyLoad()}).catch(function(e){})},setCookieDetail:function(e,t,i){var a=new Date;a.setTime(a.getTime()+24*i*60*60*1e3);var s="expires="+a.toUTCString();document.cookie=e+"="+t+";"+s+";path=/"},getCookie:function(e){for(var t=e+"=",i=decodeURIComponent(document.cookie).split(";"),a=0;a<i.length;a++){for(var s=i[a];" "===s.charAt(0);)s=s.substring(1);if(0===s.indexOf(t))return s.substring(t.length,s.length)}return""},deleteLocation:function(e){this.deleteCookie("locationId"),this.deleteCookie("locationName"),this.locationSearch="",this.selectedLocationName="",this.sendForm.location=!1},clickedProducts:function(){var e=this,t=document.getElementById("productId").value,i=e.getCookie("productIdList").split(","),a=i.indexOf(t);e.setCookieClickedProductsList=i,-1!==a?e.setCookieClickedProductsList[a]=t:i.length<6?e.setCookieClickedProductsList.push(t):(e.setCookieClickedProductsList.shift(),e.setCookieClickedProductsList.push(t)),e.setCookieDetail("productIdList",e.setCookieClickedProductsList,365)},checkedProduct:function(e){location.href=e.target.dataset.url},getComment:function(e){var t=this,i=document.getElementById("productId").value;axios.get(t.api.commentList,{params:{productId:i,NextPage:e}}).then(function(e){t.comments=e.data}).catch(function(e){})},addToCard:function(e){var t=this;t.sendForm.location?""===t.sendForm.date?t.messageDetail.date=!0:t.deliveryTimes.IsFlexibleDelivery||""!==t.sendForm.time?t.deliveryTimes.IsFlexibleDelivery&&""===t.sendTime.hour?t.messageDetail.hour=!0:t.deliveryTimes.IsFlexibleDelivery&&""===t.sendTime.minute?t.messageDetail.minute=!0:t.sendForm.isSendProduct?t.sendForm.isDeliveryExist?t.sendForm.todayDisabled&&1===t.selectedDate?t.messageDetail.todayDisabled=!0:(t.messageDetail.location=!1,t.messageDetail.date=!1,t.messageDetail.time=!1,t.messageDetail.isSendProduct=!1,t.messageDetail.todayDisabled=!1,t.messageDetail.isDeliveryExist=!1,document.querySelector("#productDetailForm").submit()):t.messageDetail.isDeliveryExist=!0:t.messageDetail.isSendProduct=!0:t.messageDetail.time=!0:t.messageDetail.location=!0}},created:function(){var e=this;document.addEventListener("click",this.closeOutsideLocationSearch),document.addEventListener("click",this.programaticOpen),e.lazyLoad(),e.clickedProducts(),e.getComment(),sProducts.length>4&&sProducts.length<36&&(e.similarProducts(),console.log("benzer ok")),e.getCookie("productIdList")&&e.lastviewedProducts(),e.getCookie("locationId")&&e.checkSendLocation()},updated:function(){this.$nextTick(function(){this.getCookie("locationId")&&(this.sendForm.location=""!==this.selectedLocationName),this.disableddates.to=this.sendForm.todayDisabled?new Date((new Date).setDate((new Date).getDate()+1)-864e4):new Date(Date.now()-864e4)})},destroyed:function(){document.removeEventListener("click",this.closeOutsideLocationSearch),document.removeEventListener("click",this.programaticOpen)}});if(Number(ImgCount)>1)var galleryThumbs=new Swiper(".gallery-thumbs",{direction:"vertical",spaceBetween:10,slidesPerView:"auto",freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0}),galleryTop=new Swiper(".gallery-top",{spaceBetween:10,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",type:"bullets"},thumbs:{swiper:galleryThumbs},breakpoints:{320:{slidesPerView:1,spaceBetween:10}}});